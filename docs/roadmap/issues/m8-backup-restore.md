## 요약
DB 백업/복구 및 마이그레이션 롤백 절차를 정의하고 자동화 가이드를 마련한다.

## 배경/문제
운영 환경에서 장애나 데이터 손상 시 복구 절차가 표준화되어 있지 않다.

## 목표
- SQLite/PG 각각의 백업/복구 절차 확정
- 마이그레이션 롤백 전략 정리
- 체크리스트와 검증 방법 정의

## 범위
- 포함:
  - 백업 포맷/보관 정책
  - 복구 단계별 체크리스트
  - 마이그레이션 롤백 가이드
- 제외:
  - 원격/팀 권한 모델

## 수용 기준 (Acceptance Criteria)
- [ ] SQLite/PG 백업/복구 문서 완성
- [ ] 롤백 전략 문서화
- [ ] 로컬/컨테이너 환경 리허설 1회 이상

## 리스크/가정
- 데이터 볼륨 크기에 따른 다운타임 고려 필요

## 의존성
- DB 백엔드 구성 정책

## 테스트/검증
- 백업 파일 무결성 검증
- 복구 후 기능 점검(로그/Job 목록)

## 리허설 계획 (초안)
- 빈도: 분기 1회
- 범위: 프로덕션 데이터 샘플 또는 스테이징 데이터
- 시나리오:
  1) 전체 백업 수행
  2) 복구 환경에 리스토어
  3) 서비스 기동 후 기본 API/Job 조회 확인
  4) 로그/아티팩트 경로 접근 확인
  5) 롤백 전략 문서와 비교 점검
- 성공 기준: 데이터 무결성/접근성, 오류 0건

## 체크리스트 (초안)
- 백업 전
  - [ ] 서비스 버전/마이그레이션 버전 기록
  - [ ] `DATA_DIR` 경로 확인
  - [ ] 디스크 여유 공간 확인
  - [ ] 대상 DB 백엔드(SQLite/PG) 확인
- 백업
  - [ ] SQLite: `DATA_DIR/s3desk.db` 스냅샷
  - [ ] PostgreSQL: `pg_dump` 실행 및 보관
  - [ ] 아카이브 저장 위치/권한 확인
- 복구
  - [ ] 복구 환경 준비(컨테이너/로컬)
  - [ ] DB 복원 후 서비스 기동
  - [ ] `healthz/readyz` 확인
  - [ ] Job 목록/로그 접근 확인
  - [ ] 오류 발생 시 로그 수집
- 사후
  - [ ] 리허설 결과 기록(성공/실패, 소요 시간)
  - [ ] 개선 항목 업데이트

## 롤아웃/롤백
- 문서 우선 제공, 운영 환경 점진 적용

## 메트릭
- 복구 성공률
- 복구 소요 시간

## 참고 링크
- docs/production-roadmap.md
