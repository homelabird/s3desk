# 프로덕션 로드맵 (장기)

이 문서는 S3Desk를 **로컬 기본 제품에서 프로덕션급 품질**로 끌어올리기 위한 장기 로드맵이다.
현재 설계/기능의 기준선은 `ROADMAP.md`와 문서들(`docs/QA_CHECKLIST.md`, `docs/LOGGING_PIPELINE.md`,
`docs/JOB_RCLONE_MAP.md`, `docs/USAGE.md`, `docs/UX_AUDIT_PHASE1.md`)을 따른다.

## 1. 목표와 범위

### 목표
- 로컬 기본 사용 시 **중단/복구/안전성/관측성**이 보장되는 수준의 품질 확보
- 대용량 목록/전송/Job 관측의 **성능 상한**을 명시하고 유지
- 운영 환경에서도 **실행/업그레이드/백업/복구**가 가능하도록 표준화

### 범위 구분
- **로컬 프로덕션(기본)**: 단일 사용자의 안정성/신뢰성/관측성 향상
- **원격/팀(선택)**: 인증/권한/RBAC/감사로그/원격 보안 모델 포함 (M9 이후 재검토)

## 2. 프로덕션 정의(DoD)

아래 항목이 충족되어야 “프로덕션급”으로 간주한다.

### 안정성/복구
- Job 큐/상태의 영속성 보장(프로세스 재시작 후 복구 가능)
- 취소/재시도 정책이 명확하고 데이터 손실 없이 안전하게 동작
- Job 로그와 진행 상태가 일관되고 유실되지 않음

### 데이터 무결성
- 전송 결과 검증(체크섬/ETag 기반 또는 rclone 검증 모드 사용)
- 재시도/부분 실패 처리 정책 표준화
- 삭제/이동/복사 같은 파괴적 작업에 대한 가드레일

### 성능/확장성
- 대규모 목록/검색에서 UI 지연이 제한(가상화/페이지 캐시/검색 조건)
- Job UI와 로그 뷰어가 장시간 사용에도 안정적

### 보안
- 로컬 기본 보안 정책(127.0.0.1 바인딩 + Host/Origin 방어) 유지
- 비밀키 저장/회전/암호화 정책 명확화
- 원격 사용 시 토큰/세션 정책과 감사 추적 체계 제공

### 관측성/운영성
- 헬스체크/메트릭/로그 표준화
- 장애 복구 및 디버깅을 위한 최소 운영 Runbook 존재

## 3. 핵심 갭 분석 요약

- Job 내구성/재시작 복구 전략이 부족
- 전송 무결성 검증과 실패 분류 체계가 불완전
- 운영 메트릭/헬스체크/알림 체계 미흡
- 원격 사용을 전제로 한 인증/권한/감사 모델 부재
- 대형 데이터셋에 대한 성능 기준과 자동 회귀 체크 부족

## 4. 워크스트림 (Workstreams)

### WS1. Job 내구성 및 복구
- Job 영속성/복구, 재시작 후 상태 복원
- 취소/재시도 정책 표준화
- Job 로그/상태 보존 및 정리 정책

### WS2. 데이터 무결성/안전성
- rclone 검증 모드/ETag 체크 등 전송 검증
- 대량 삭제/이동 작업에 대한 가드레일 강화
- dry-run 기록/감사 로그 확장

### WS3. 보안/자격증명
- 자격증명 암호화 및 회전 정책
- 토큰 만료/재발급 정책
- 원격 모드 사용 시 TLS/권한 모델 설계

### WS4. 관측성/운영
- 헬스체크, 구조화 로그, 핵심 메트릭 정의
- Job 실패 원인 분류 및 대시보드화
- 운영 가이드/Runbook 정리

### WS5. 성능/스케일
- 대형 목록/검색/정렬 성능 검증
- Job 리스트/로그 뷰어 성능 상한 정의
- 캐시 정책/메모리 상한 관리
- 원격 업로드 경로(ingress/LB) 병목 개선: 내부 endpoint 지원, LB 분산/정책 점검, 업로드 성능 기준 정의

### WS6. UX/접근성
- 긴 텍스트/표/리스트 가독성 문제 해결
- 키보드 탐색/스크린리더 대응 점검
- 위험 작업 UX(확인/되돌리기) 강화

### WS7. 릴리스/패키징
- 버전/마이그레이션 정책 확정
- 릴리스 체크리스트/자동화
- 패키징 일관성(rclone 포함 정책)

### WS8. 호환성/테스트 매트릭스
- S3 호환 구현체별 테스트 매트릭스
- Job 수명주기 통합 테스트 확장
- 성능 회귀 테스트 체계

## 5. 마일스톤(초안)

> 일정은 예시이며, 실제 일정은 리소스/우선순위에 따라 재조정한다.

### M6. 안정성/복구 기반 (T+0~2개월)
- Job 상태 영속성, 재시작 복구, 취소/재시도 정책 확정
- 로그 보존/정리 정책 문서화
- 주요 Job 실패 유형 분류

**Exit Criteria**
- 프로세스 재시작 후 Job 상태 복구 100%
- 취소/재시도 시 데이터 손실 0건

### M7. 관측성/성능 하드닝 (T+2~4개월)
- 헬스체크, 핵심 메트릭, 구조화 로그
- 대형 목록/Job UI 성능 기준 확정 및 측정 자동화

**Exit Criteria**
- 주요 화면 렌더/스크롤 성능 기준 충족
- 실패 원인 분류/로그/메트릭 접근 가능

### M8. 보안/운영 표준화 (T+4~6개월)
- 비밀키 암호화/회전 정책 확정
- 운영 Runbook/복구 가이드 문서화

**Exit Criteria**
- 키/토큰 정책 문서화 및 테스트 완료
- 운영 체크리스트 및 백업/복구 절차 확정

### M9. 원격/팀 지원(선택) (T+6~9개월)
- 인증/권한/RBAC/감사로그
- TLS/Ingress 가이드 및 운영 정책

**Exit Criteria**
- 원격 접속 시 권한과 감사 추적 가능

### M10. 엔터프라이즈 확장(선택) (T+9~12개월)
- 정책/수명주기/권한 UI
- 호환성 매트릭스 고도화

## 6. 품질 지표(SLO) 제안

- Job 성공률: 99% 이상
- Job 평균 실패 복구 시간: 5분 이내
- UI 초기 로드: 2초 이내(로컬 기준)
- 목록 스크롤 FPS: 50 FPS 이상(대형 목록)
- WS 재연결 평균 시간: 2초 이내

## 7. 의사결정 기록(Decision Log)

- 로컬 기본 정책 유지 여부
- 원격/팀 기능의 우선순위
- Job 영속성의 기술 방향(DB 스키마/큐 설계)
- 결정: 로컬 기본 유지, 원격/팀은 M9 이후 재검토

## 8. 다음 단계

- 위 워크스트림별 이슈 생성 및 우선순위 확정
- 마일스톤(분기/반기) 단위로 목표 설정
- 핵심 성능/안정성 지표 기준선 정의
